<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Café Dilzania | Snacks & Drinks</title>
  <link rel="stylesheet" href="style.css">

</head>

<body>

  <header>
    <div class="logo-container"><img src="image/cd logo.png" alt="Cafe Dilzania Logo"></div>

    <!-- Hamburger Icon -->
    <div class="hamburger" id="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </div>

    <nav id="navbar">
      <a href="#menu">Menu</a>
      <a href="#top-food">Top Items</a>
      <a href="#rating">Rate Us</a>
    </nav>
  </header>

  <div class="nav-overlay" id="nav-overlay"></div>

  <div class="overlay" id="overlay"></div>

  <section class="hero">
    <div class="hero-content">
      <h2>Welcome to Café Dilzania</h2>
      <p>Your cozy corner for the best snacks & refreshing drinks.</p>
      <button>Explore Menu</button>
    </div>
  </section>

  <section id="menu" class="menu">
    <h2>Our Delicious Menu</h2>
    <div class="menu-items">
      <div class="item"><img src="image/caramellatte.jpg">
        <div class="item-info">
          <h3>Caramel Latte</h3>
          <p>$4.99</p>
          <div class="stars">★★★★☆</div>
        </div>
      </div>
      <div class="item"><img src="image/club-sandwich.jpg">
        <div class="item-info">
          <h3>Club Sandwich</h3>
          <p>$6.50</p>
          <div class="stars">★★★★★</div>
        </div>
      </div>
      <div class="item"><img src="image/chocolate pastry.jpg">
        <div class="item-info">
          <h3>Chocolate Pastry</h3>
          <p>$3.75</p>
          <div class="stars">★★★★☆</div>
        </div>
      </div>
    </div>
  </section>

  <section id="top-food" class="top-food">
    <h2>Top Rated Food Items</h2>
    <div class="top-items">
      <div class="top-item"><img src="image/espresso.jpg">
        <h3>Espresso Shot</h3>
      </div>
      <div class="top-item"><img src="image/burger.jpg">
        <h3>Veggie Burger</h3>
      </div>
      <div class="top-item"><img src="image/mangosmoothie.jpg">
        <h3>Mango Smoothie</h3>
      </div>
    </div>
  </section>

  <section id="rating" class="rating-section">
    <h2>Rate Our Dishes</h2>
    <div class="rating-cards" id="rating-cards"></div>
  </section>

  <!-- Popup -->
  <div class="rating-popup" id="rating-popup">
    <div class="popup-content">
      <button class="btn-close" id="close-popup">✖</button>
      <img id="popup-img" src="" alt="Food">
      <h3 id="popup-name">Food Name</h3>
      <div class="popup-stars">
        <input type="radio" id="star1" name="popup-rating" value="1"><label for="star1">★</label>
        <input type="radio" id="star2" name="popup-rating" value="2"><label for="star2">★</label>
        <input type="radio" id="star3" name="popup-rating" value="3"><label for="star3">★</label>
        <input type="radio" id="star4" name="popup-rating" value="4"><label for="star4">★</label>
        <input type="radio" id="star5" name="popup-rating" value="5"><label for="star5">★</label>
      </div>
      <textarea id="user-review" placeholder="Write your review..."></textarea>
      <button class="btn-submit" id="submit-review">Submit</button>
      <p id="thank-you-msg">Thank you for your response!</p>
    </div>
  </div>

  <!-- Floating Buttons -->
  <a href="https://wa.me/919876543210" target="_blank" class="whatsapp-btn" title="Chat with us on WhatsApp">
    <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" width="26" height="26">
      <path
        d="M20.52 3.48A11.77 11.77 0 0 0 12 0C5.37 0 .06 5.31.06 11.84a11.76 11.76 0 0 0 1.67 6.05L0 24l6.29-1.64A11.82 11.82 0 0 0 12 23.68c6.63 0 11.94-5.31 11.94-11.84A11.71 11.71 0 0 0 20.52 3.48ZM12 21.4a9.44 9.44 0 0 1-4.83-1.32l-.35-.2-3.73 1L4.27 17l-.23-.37a9.46 9.46 0 0 1-1.44-5A9.41 9.41 0 0 1 12 2.4a9.41 9.41 0 0 1 9.4 9.36A9.41 9.41 0 0 1 12 21.4Zm5.45-7.05c-.3-.15-1.78-.88-2.06-.98s-.48-.15-.68.15-.78.98-.96 1.18-.36.23-.66.08a7.73 7.73 0 0 1-2.28-1.41 8.48 8.48 0 0 1-1.57-1.93c-.17-.3 0-.46.13-.61.14-.14.3-.36.45-.53.15-.17.2-.3.3-.5s.05-.38-.03-.53-.68-1.64-.93-2.24c-.25-.6-.5-.5-.68-.51H8.3a1.3 1.3 0 0 0-.9.43 3.71 3.71 0 0 0-1.17 2.76 6.46 6.46 0 0 0 1.38 3.41c.16.21 2.23 3.43 5.42 4.78.76.33 1.36.53 1.83.68.77.25 1.47.22 2.02.13.62-.09 1.78-.72 2.03-1.42s.25-1.29.18-1.42-.27-.2-.56-.35Z" />
    </svg>
  </a>

  <button id="goTopBtn" class="top-btn" title="Go to Top">
    <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" width="22" height="22">
      <path
        d="M4.707 15.707a1 1 0 0 1-1.414-1.414l8-8a1 1 0 0 1 1.414 0l8 8a1 1 0 0 1-1.414 1.414L12 8.414l-7.293 7.293z" />
    </svg>
  </button>

  <footer>© 2025 Café Dilzania | All Rights Reserved</footer>
  </body>

  <script>
    const foods = [
      { name: "Caramel Latte", img: "image/caramellatte.jpg" },
      { name: "Club Sandwich", img: "image/club-sandwich.jpg" },
      { name: "Chocolate Pastry", img: "image/chocolate pastry.jpg" }
    ];

    // Load previous reviews from localStorage or defaults
    let reviewsData = JSON.parse(localStorage.getItem('reviewsData')) || {
      "Caramel Latte": ["Smooth and creamy!", "Loved the caramel taste."],
      "Club Sandwich": ["Crispy and tasty!", "Perfectly layered sandwich."],
      "Chocolate Pastry": ["Rich chocolate flavor!", "Soft and sweet."]
    };

    const cardsContainer = document.getElementById('rating-cards');

    // Function to render rating cards dynamically
    function renderCards() {
      cardsContainer.innerHTML = "";
      foods.forEach(f => {
        const rList = reviewsData[f.name] || [];
        const avg = (rList.length * 4.5) / rList.length || 4.5;

        const div = document.createElement('div');
        div.className = 'rating-card';
        div.innerHTML = `
      <img src="${f.img}" alt="${f.name}">
      <div class="card-info">
        <h3>${f.name}</h3>
        <p class="numeric-rating">${avg.toFixed(1)} <span>★</span></p>
        <p class="prev-review" id="review-${f.name.replace(/\s/g, '')}">
          ${rList[0] || 'No reviews yet.'}
        </p>
        <button class="rate-btn" data-name="${f.name}" data-img="${f.img}">Rate</button>
      </div>
    `;
        cardsContainer.appendChild(div);
      });
      attachRateEvents();
      startReviewRotation();
    }

    // Attach popup open events
    function attachRateEvents() {
      document.querySelectorAll('.rate-btn').forEach(btn => {
        btn.onclick = () => {
          const name = btn.dataset.name;
          const img = btn.dataset.img;

          document.getElementById('popup-name').textContent = name;
          document.getElementById('popup-img').src = img;

          document.querySelectorAll('input[name="popup-rating"]').forEach(r => r.checked = false);
          document.getElementById('user-review').value = "";
          document.getElementById('thank-you-msg').style.display = 'none';

          document.getElementById('rating-popup').classList.add('active');
          document.getElementById('overlay').classList.add('active');
          document.body.classList.add('no-scroll');
        };
      });
    }

    // Close popup
    function closePopup() {
      document.getElementById('rating-popup').classList.remove('active');
      document.getElementById('overlay').classList.remove('active');
      document.body.classList.remove('no-scroll');
    }
    document.getElementById('close-popup').onclick = closePopup;
    document.getElementById('overlay').onclick = () => {
      if (document.getElementById('rating-popup').classList.contains('active')) closePopup();
    };

    // Submit review
    document.getElementById('submit-review').onclick = () => {
      const name = document.getElementById('popup-name').textContent.trim();
      const rating = document.querySelector('input[name="popup-rating"]:checked');
      const review = document.getElementById('user-review').value.trim();

      if (!rating) { alert("Please select a rating."); return; }
      if (!review) { alert("Please write a review."); return; }

      if (!reviewsData[name]) reviewsData[name] = [];
      reviewsData[name].push(review);
      localStorage.setItem('reviewsData', JSON.stringify(reviewsData));

      document.getElementById('thank-you-msg').style.display = 'block';

      // Update review in card immediately
      const reviewEl = document.getElementById('review-' + name.replace(/\s/g, ''));
      if (reviewEl) reviewEl.textContent = review;

      setTimeout(() => { closePopup(); renderCards(); }, 1500);
    };

    // Rotate reviews in each card
    function startReviewRotation() {
      Object.keys(reviewsData).forEach(n => {
        const arr = reviewsData[n];
        let idx = 0;
        const el = document.getElementById('review-' + n.replace(/\s/g, ''));
        if (!el || arr.length < 2) return;
        setInterval(() => {
          idx = (idx + 1) % arr.length;
          el.style.animation = 'slideInOut 2s ease';
          setTimeout(() => { el.textContent = arr[idx]; }, 1000);
          setTimeout(() => { el.style.animation = 'none'; }, 2000);
        }, 4000);
      });
    }

    /* =============================== */
    /* GO TO TOP BUTTON FUNCTIONALITY */
    /* =============================== */
    const goTopBtn = document.getElementById("goTopBtn");
    window.onscroll = () => {
      if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
        goTopBtn.classList.add("show");
      } else {
        goTopBtn.classList.remove("show");
      }
    };
    goTopBtn.onclick = () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    };

    /* =============================== */
    /* HAMBURGER MENU FUNCTIONALITY */
    /* =============================== */
    const hamburger = document.getElementById('hamburger');
    const navbar = document.getElementById('navbar');
    const navOverlay = document.getElementById('nav-overlay');

    hamburger.addEventListener('click', () => {
      hamburger.classList.toggle('active');
      navbar.classList.toggle('active');
      navOverlay.classList.toggle('active');
    });

    // Close menu when a link is clicked
    document.querySelectorAll('#navbar a').forEach(link => {
      link.addEventListener('click', () => {
        hamburger.classList.remove('active');
        navbar.classList.remove('active');
        navOverlay.classList.remove('active');
      });
    });

    // Close menu when overlay is clicked
    navOverlay.addEventListener('click', () => {
      hamburger.classList.remove('active');
      navbar.classList.remove('active');
      navOverlay.classList.remove('active');
    });

    renderCards();
  </script>
</html>